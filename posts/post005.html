<!DOCTYPE HTML>
<!--
	Future Imperfect by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Leetcode1797</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
	</head>
	<body class="single is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<h1><a href="../index.html">Shiyun's Blog</a></h1>
						<nav class="links">
							<ul>
							<!-- 	<li><a href="#">Lorem</a></li>
								<li><a href="#">Ipsum</a></li>
								<li><a href="#">Feugiat</a></li>
								<li><a href="#">Tempus</a></li>
								<li><a href="#">Adipiscing</a></li> -->
							</ul>
						</nav>
						<nav class="main">
							<ul>
								<li class="search">
									<a class="fa-search" href="#search">Search</a>
									<form id="search" method="get" action="#">
										<input type="text" name="query" placeholder="Search" />
									</form>
								</li>
								<li class="menu">
									<a class="fa-bars" href="#menu">Menu</a>
								</li>
							</ul>
						</nav>
					</header>

				<!-- Menu -->
					<section id="menu">

						<!-- Search -->
							<section>
								<form class="search" method="get" action="#">
									<input type="text" name="query" placeholder="Search" />
								</form>
							</section>
					</section>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<article class="post" id="detail-post">
								<header>
									<div class="title">
										<h2><a href="#">1797. Design Authentication Manager</a></h2>
										<p>Medium Problem</p>
									</div>
									<div class="meta">
										<time class="published" datetime="2021-03-26">March 26, 2021</time>
										<a href="#" class="author"><span class="name">Shiyun Zhang</span><img src="../images/shiyunlogo.png" alt="" /></a>
									</div>
								</header>
								<div class="content">
									<h3>Problem Analysis</h3>
									<span class="featured_img"><img src="../images/post005.png" alt="" width="500" /></span>
									<p>Need to design an AuthenticationManager to generate tokens. When initializing theAuthenticationManager, we will initialize the token life which is TimeToLive. For the above example, we call AuthenticationManager(5) then we will have token Life for 5 seconds.</p>
									<p>If generated('aaa', 2) then token 'aaa' will expire at 2+5 = 7 second. Here we need to have something to store the tokens and its life. Dict is the first choice here because we have tokenId. Since we need to count unexpiredToken, to avoid looping through the Dict everytime, we may want to use the orderedDict so that we can put the newly generated token or renewed token to the end of the Dict.</p>
									<p>Let's go through the example above:</p>
									<ol>
										<li>init an OrderedDict => d = {} and we know the tokenLife = 5</li>
										<li>renew tokenId 'aaa' at 1. We don't have tokenId in d, ignore it</li>
										<li>generate tokenId 'aaa' at 2 => d = {'aaa': 7(2+5)}</li>
										<li>countUnexpriedTokens at 6, we got 1 which is 'aaa'</li>
										<li>generate tokenId 'bbb' at 7 => d = {'aaa': 7 (expired), 'bbb':12}, here we should remove the expired token 'aaa' from d.</li>
										<li>renew tokenId 'aaa' at 8. 'aaa' is expired, ignore it</li>
										<li>renew tokenId 'bbb' at 10. 'bbb' is alive => d = {'bbb': 15(10+5)}</li>
										<li>countUnexpriedTokens at 15, d = {'bbb' : 15}, no token alive, return 0</li>
									</ol>

									<p>To always keep the token in d alive, we need to remove the expired token in time.</p>
									<h3>Code Example</h3>
									<script src="https://gist.github.com/szhang5/9bfd94fe6e3d7d2915defbb0992980c6.js"></script>
								</div>
								<footer>
									<ul class="stats">
										<li><a href="#" class="icon solid fa-hashtag">Leedcode</a></li>
										<li><a href="#" class="icon solid fa-hashtag">1797</a></li>
										<li><a href="#" class="icon solid fa-hashtag">Medium</a></li>
									</ul>
								</footer>
							</article>

					</div>

				<!-- Footer -->
					<section id="footer">
						<ul class="icons">
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
						</ul>
						<p class="copyright">&copy; Shiyun Zhang 2021. Design: <a href="http://html5up.net">HTML5 UP</a>. </p>
					</section>

			</div>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>

	</body>
</html>